<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Celebra con Selena</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Atma:wght@300;400;500;600;700&family=Fleur+De+Leah&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <script src="https://kit.fontawesome.com/4a811f41e5.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <section class="herosection">
            <div class="container">
                <div class="hero-text">
                    <h2>XV a√±os</h2>
                    <h1>Selena</h1>
                    <h6>26/Feb/2026</h6>
                    <h6>5:00 PM</h6>
                    <br>
                       <div class="section container justify-content-center">
                    <h4 class="front" id="hero-title">Cargando...</h4>
                      <p id="hero-details"></p>
                  </div>
                <a href="#rsvp-section" class="button">Confirma tu asistencia</a>
                </div>
            </div>
        </section>
      
        <div class="slogansection container d-flex align-items-center justify-content-center text-center" style=" height: 200px;">
            "Como no recordar que hace 15 a√±os naci√≥ la flor m√°s hermosa de este hogar, por eso te queremos invitar a su celebraci√≥n, con mucha alegr√≠a y dando gracias a Dios por regalarme tan hermosa bendici√≥n"<br>
            - Pap√° de Selena
        </div>
        <div class="vestimentasection text-center mb-4">
          <i class="fa-solid fa-person-half-dress"></i>
          <h4>Dress Code</h4>
            Por favor asegurense de vestir ropa formal
        </div>
        <div class="mesaderegalossection">

        </div>
        <div class="mapasection container d-flex align-items-center justify-content-center text-center">
            <div class="textomapa">
              <i class="fa-solid fa-church"></i>
            <h4>Ceremonia Religiosa</h4>
            <p>Acompa√±enos en la catedral de Tampico para una ceremonia en honor a los XV de Selena a las 5:00 en punto</p>
            </div>

        </div>
        <div class="map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3693.6259862328884!2d-97.86006242572424!3d22.216315745936374!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d7f74768fb387f%3A0x5922d14f6ef25ce1!2sCatedral%20de%20Tampico%20(La%20Inmaculada%20Concepci%C3%B3n%20del%20Sagrario)!5e0!3m2!1ses-419!2smx!4v1769657002554!5m2!1ses-419!2smx" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
                <div class="eventosection container d-flex align-items-center justify-content-center text-center">
            <div class="textoevento">
              <i class="fa-solid fa-champagne-glasses"></i>
            <h4 class="titlereception">Recepci√≥n</h4>
            <p>De las 7 en adelante celebraremos los XV de Selena en el Hotel Posada de Tampico, Salon Imperial</p>
            </div>

        </div>
        <div class="evento">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3692.0804108693083!2d-97.87762892572238!3d22.27494364381606!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d7fa2888cfe8c5%3A0xef11b64ff49a624a!2sHotel%20Posada%20de%20Tampico!5e0!3m2!1ses-419!2smx!4v1769658100398!5m2!1ses-419!2smx" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
        <section class="Gallery">
        <h4 class="galheader">Galeria de fotos</h4>
        <!-- Gallery -->
          <div class="row">
            <div class="col-lg-4 col-md-12 mb-4 mb-lg-0">
              <img
                src="./img/selenaportrait1.JPG"
                class="w-100 shadow-1-strong rounded mb-4"
                alt="Boat on Calm Water"
              />

              <img
                src="./img/puerta.jpg"
                class="w-100 shadow-1-strong rounded mb-4"
                alt="Wintry Mountain Landscape"
              />
            </div>

            <div class="col-lg-4 mb-4 mb-lg-0">
              <img
                src="./img/jardin.jpg"
                class="w-100 shadow-1-strong rounded mb-4"
                alt="Mountains in the Clouds"
              />

              <img
                src="./img/selenaportrait2.JPG"
                class="w-100 shadow-1-strong rounded mb-4"
                alt="Boat on Calm Water"
              />
            </div>

            <div class="col-lg-4 mb-4 mb-lg-0">
              <img
                src="./img/selenasquare1.JPG"
                class="w-100 shadow-1-strong rounded mb-4"
                alt="Waves at Sea"
              />

              <img
                src="./img/alberca.jpg"
                class="w-100 shadow-1-strong rounded mb-4"
                alt="Yosemite National Park"
              />
            </div>
          </div>
<!-- Gallery -->
          </section>

<div class="timeline">
  <div class="container1 left">
    <div class="content">
      <h2>5:00 pm</h2>
      <p>Ceremonia religiosa</p>
      <div class="boxicon"><i class="fa-solid fa-church"></i></div>
    </div>
  </div>
  <div class="container1 right">
    <div class="content">
      <h2>7:00 pm</h2>
      <p>Recepci√≥n</p>
      <div class="boxicon"><i class="fa-regular fa-calendar"></i></div>
    </div>
  </div>
    <div class="container1 left">
    <div class="content">
      <h2>8:00 pm</h2>
      <p>Brindis y cena</p>
      <div class="boxicon"><i class="fa-solid fa-champagne-glasses"></i></div>
    </div>
  </div>
  <div class="container1 right">
    <div class="content">
      <div class="content-text">
        <h2>9:00 pm</h2>
        <p>Baile con el padre y fiesta</p>
      </div>
      <div class="boxicon extra"><i class="fa-solid fa-cake-candles"></i></div>
    </div>
  </div>
    <div class="container1 left">
    <div class="content">
      <div class="content-text">
        <h2>11:00 pm</h2>
       <p>Despedida y fin de fiesta</p>
      </div>
      <div class="boxicon extra"><i class="fa-solid fa-handshake"></i></div>
    </div>
  </div>
</div><!-- ========================= -->
<!-- RSVP SECTION -->
<!-- ========================= -->
<div
  class="section card container d-flex flex-column justify-content-center align-items-center text-center"
  id="rsvp-section"
>
  <h2 id="rsvp-title">Cargando...</h2>
  <p id="rsvp-details"></p>

  <form
    class="mx-auto"
    id="rsvp-form"
    style="display:none; margin-top:20px;"
  >
    <p id="existing-note" class="muted"></p>

    <!-- ‚≠ê SOLO PARA INVITACI√ìN DE 1 -->
    <div id="single-invite" style="display:none;">
      <p>¬øPodr√°s asistir al evento?</p>
      <button type="button" id="btn-yes">S√≠</button>
      <button type="button" id="btn-no">No</button>
    </div>

    <!-- NORMAL (2+) -->
    <div id="multi-invite">
      <label>
        ¬øCu√°ntas personas asistir√°n?
        <br />
        <select id="attending"></select>
      </label>

      <div id="guest-names" style="margin-top:16px;"></div>

      <div class="button-box d-flex justify-content-center align-content-center">
        <button type="submit">Confirma tu asistencia</button>
      </div>
    </div>
  </form>

  <p id="status" style="margin-top:16px;"></p>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const db = supabase.createClient(
    "https://ojizqwpuejnatavifxys.supabase.co",
    "sb_publishable_g_ttwNUwrEAQy3hrWVAWxw_BN1EMNYT"
  );

  const params = new URLSearchParams(window.location.search);
  const inviteCode = params.get("code");

  const heroTitleEl = document.getElementById("hero-title");
  const heroDetailsEl = document.getElementById("hero-details");
  const rsvpTitleEl = document.getElementById("rsvp-title");
  const rsvpDetailsEl = document.getElementById("rsvp-details");
  const formEl = document.getElementById("rsvp-form");
  const selectEl = document.getElementById("attending");
  const statusEl = document.getElementById("status");
  const guestNamesEl = document.getElementById("guest-names");
  const existingNoteEl = document.getElementById("existing-note");

  const singleInviteEl = document.getElementById("single-invite"); // ‚≠ê
  const multiInviteEl = document.getElementById("multi-invite"); // ‚≠ê
  const btnYes = document.getElementById("btn-yes"); // ‚≠ê
  const btnNo = document.getElementById("btn-no"); // ‚≠ê

  let currentInvite = null;

  if (!inviteCode) {
    heroTitleEl.textContent =
      "Bienvenid@! Por favor utiliza tu link especial y √∫nico para confirmar tu asistencia.";
    rsvpTitleEl.textContent =
      "Bienvenid@! Por favor utiliza tu link especial y √∫nico para confirmar tu asistencia.";
    formEl.style.display = "none";
  } else {
    loadInvite();
  }

  function renderGuestNameInputs(count, existingNames = []) {
    guestNamesEl.innerHTML = "";
    if (count === 0) return;

    for (let i = 0; i < count; i++) {
      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = `Nombre del invitado ${i + 1}`;
      input.value = existingNames[i] || "";
      guestNamesEl.appendChild(input);
    }
  }

  async function loadInvite() {
    const { data: invite, error } = await db
      .from("invites")
      .select("*")
      .eq("invite_code", inviteCode)
      .single();

    if (error || !invite) {
      rsvpTitleEl.textContent = "Invitaci√≥n no encontrada";
      return;
    }

    currentInvite = invite;

    heroTitleEl.textContent = `Bienvenid@, ${invite.display_name}`;
    rsvpTitleEl.textContent = `Bienvenid@, ${invite.display_name}`;

    if (invite.max_guests === 1) {
      heroDetailsEl.textContent = "Esta invitaci√≥n es personal";
      rsvpDetailsEl.textContent = "Esta invitaci√≥n es personal";

      singleInviteEl.style.display = "block";
      multiInviteEl.style.display = "none";
    } else {
      heroDetailsEl.textContent = `Incluye hasta ${invite.max_guests} personas`;
      rsvpDetailsEl.textContent = `Incluye hasta ${invite.max_guests} personas`;

      singleInviteEl.style.display = "none";
      multiInviteEl.style.display = "block";

      selectEl.innerHTML = "";
      for (let i = 0; i <= invite.max_guests; i++) {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = i;
        selectEl.appendChild(option);
      }
    }

    const { data: existingRsvp } = await db
      .from("rsvps")
      .select("*")
      .eq("invite_id", invite.id)
      .single();

    if (existingRsvp) {
      if (invite.max_guests > 1) {
        selectEl.value = existingRsvp.attending;
        renderGuestNameInputs(
          existingRsvp.attending,
          existingRsvp.guest_names || []
        );
      }

      existingNoteEl.textContent =
        "Ya has confirmado tu asistencia. Puedes actualizarla si lo necesitas.";
    }

    formEl.style.display = "block";
  }

  selectEl.addEventListener("change", () => {
    renderGuestNameInputs(Number(selectEl.value));
  });

  // ‚≠ê RSVP simple (1 invitado)
  async function submitSingle(attending) {
    statusEl.textContent = "Guardando tu respuesta...";

    const { error } = await db
      .from("rsvps")
      .upsert(
        {
          invite_id: currentInvite.id,
          attending,
          guest_names: []
        },
        { onConflict: "invite_id" }
      );

    statusEl.textContent = error
      ? "Oops algo sali√≥ mal."
      : "¬°Gracias por tu respuesta! üíõ";
  }

  btnYes.addEventListener("click", () => submitSingle(1));
  btnNo.addEventListener("click", () => submitSingle(0));

  // RSVP normal (2+)
  formEl.addEventListener("submit", async (e) => {
    e.preventDefault();
    if (currentInvite.max_guests === 1) return;

    const attending = Number(selectEl.value);
    const guestNames = Array.from(
      guestNamesEl.querySelectorAll("input")
    ).map(i => i.value.trim());

    statusEl.textContent = "Guardando tu informaci√≥n...";

    const { error } = await db
      .from("rsvps")
      .upsert(
        {
          invite_id: currentInvite.id,
          attending,
          guest_names: guestNames
        },
        { onConflict: "invite_id" }
      );

    statusEl.textContent = error
      ? "Oops algo sali√≥ mal."
      : "¬°Asistencia confirmada! üéâ";
  });
</script>

    </body>
</html>